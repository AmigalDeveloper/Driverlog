{"ast":null,"code":"import { NG_VALIDATORS } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\n/** A hero's name can't match the given regular expression */\nexport const distanceValidator = control => {\n  let start;\n  let end;\n  if (control.parent) {\n    start = control.parent.value.distanceStart;\n    end = control.value;\n  }\n  const invalid = end < start;\n  return !invalid ? null : {\n    validDistance: {\n      value: control.value\n    }\n  };\n};\nexport class DistanceValidatorDirective {\n  constructor() {\n    this.distanceStart = 0;\n  }\n  validate(control) {\n    return distanceValidator(control);\n  }\n  registerOnValidatorChange(fn) {\n    this.onChange = fn;\n  }\n  ngOnChanges(changes) {\n    if ('distanceEnd' in changes) {\n      if (this.onChange) {\n        this.onChange();\n      }\n    }\n  }\n}\nDistanceValidatorDirective.ɵfac = function DistanceValidatorDirective_Factory(t) {\n  return new (t || DistanceValidatorDirective)();\n};\nDistanceValidatorDirective.ɵdir = /*@__PURE__*/i0.ɵɵdefineDirective({\n  type: DistanceValidatorDirective,\n  selectors: [[\"\", \"appDistanceValidator\", \"\"]],\n  inputs: {\n    distanceStart: [\"appDistanceValidator\", \"distanceStart\"]\n  },\n  features: [i0.ɵɵProvidersFeature([{\n    provide: NG_VALIDATORS,\n    useExisting: DistanceValidatorDirective,\n    multi: true\n  }]), i0.ɵɵNgOnChangesFeature]\n});","map":{"version":3,"names":["NG_VALIDATORS","distanceValidator","control","start","end","parent","value","distanceStart","invalid","validDistance","DistanceValidatorDirective","constructor","validate","registerOnValidatorChange","fn","onChange","ngOnChanges","changes","selectors","inputs","features","i0","ɵɵProvidersFeature","provide","useExisting","multi","ɵɵNgOnChangesFeature"],"sources":["/Volumes/Transcend/ionic/driver-log/src/app/validators/distance.validator.directive.ts"],"sourcesContent":["import { Directive, Input, OnChanges, SimpleChanges } from '@angular/core';\nimport { AbstractControl, NG_VALIDATORS, ValidationErrors, Validator, ValidatorFn } from '@angular/forms';\n\n\n/** A hero's name can't match the given regular expression */\nexport const distanceValidator: ValidatorFn = (control: AbstractControl): ValidationErrors | null => {\n  let start;\n  let end;\n  if(control.parent)\n  { start = control.parent.value.distanceStart;\n     end = control.value;\n    }\n    const invalid = end < start;\n    return !invalid ? null : {validDistance: {value: control.value}};\n  };\n\n\n@Directive({\n  selector: '[appDistanceValidator]',\n  providers: [{provide: NG_VALIDATORS, useExisting: DistanceValidatorDirective, multi: true}]\n})\nexport class DistanceValidatorDirective implements Validator, OnChanges {\n  @Input('appDistanceValidator') distanceStart = 0;\n\n  private onChange?: () => void;\n\n  validate(control: AbstractControl<any, any>): ValidationErrors | null {\n    return  distanceValidator(control);\n\n  }\n\n  registerOnValidatorChange(fn: () => void): void {\n    this.onChange = fn;\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if ('distanceEnd' in changes) {\n      if (this.onChange) {this.onChange();}\n    }\n  }\n}\n"],"mappings":"AACA,SAA0BA,aAAa,QAAkD,gBAAgB;;AAGzG;AACA,OAAO,MAAMC,iBAAiB,GAAiBC,OAAwB,IAA6B;EAClG,IAAIC,KAAK;EACT,IAAIC,GAAG;EACP,IAAGF,OAAO,CAACG,MAAM,EACjB;IAAEF,KAAK,GAAGD,OAAO,CAACG,MAAM,CAACC,KAAK,CAACC,aAAa;IACzCH,GAAG,GAAGF,OAAO,CAACI,KAAK;;EAEpB,MAAME,OAAO,GAAGJ,GAAG,GAAGD,KAAK;EAC3B,OAAO,CAACK,OAAO,GAAG,IAAI,GAAG;IAACC,aAAa,EAAE;MAACH,KAAK,EAAEJ,OAAO,CAACI;IAAK;EAAC,CAAC;AAClE,CAAC;AAOH,OAAM,MAAOI,0BAA0B;EAJvCC,YAAA;IAKiC,KAAAJ,aAAa,GAAG,CAAC;;EAIhDK,QAAQA,CAACV,OAAkC;IACzC,OAAQD,iBAAiB,CAACC,OAAO,CAAC;EAEpC;EAEAW,yBAAyBA,CAACC,EAAc;IACtC,IAAI,CAACC,QAAQ,GAAGD,EAAE;EACpB;EAEAE,WAAWA,CAACC,OAAsB;IAChC,IAAI,aAAa,IAAIA,OAAO,EAAE;MAC5B,IAAI,IAAI,CAACF,QAAQ,EAAE;QAAC,IAAI,CAACA,QAAQ,EAAE;;;EAEvC;;AAlBWL,0BAA0B,C;mBAA1BA,0BAA0B;AAAA;AAA1BA,0BAA0B,C;QAA1BA,0BAA0B;EAAAQ,SAAA;EAAAC,MAAA;IAAAZ,aAAA;EAAA;EAAAa,QAAA,GAAAC,EAAA,CAAAC,kBAAA,CAF1B,CAAC;IAACC,OAAO,EAAEvB,aAAa;IAAEwB,WAAW,EAAEd,0BAA0B;IAAEe,KAAK,EAAE;EAAI,CAAC,CAAC,GAAAJ,EAAA,CAAAK,oBAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}